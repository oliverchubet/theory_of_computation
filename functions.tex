\section{Functions}\label{S-sets-4}

Both the real world and the world of mathematics are full of ``functions''.
A function is a relationship between two sets that associates each element from the first set to exactly one element of the second set.  

For example, each item for sale in a store has a price.
The first set in this relationship is the set of items in the store.
For each item in the store, there is an associated price, so the
second set in is the set of possible prices.
This relationship is a function because each item has exactly one price.

There are also many natural examples of functions in mathematics.
For example, every rectangle has an associated area.
There is a function between the set of rectangles and the set of numbers.
Every natural number $n$ has a square,~$n^2$.
The relationship ``square of'' is a function from the set of natural numbers to itself.  

The notation $f\colon A\to B$ expresses that $f$ is a function from the set $A$ to the set $B$. 
The notation $f\colon A\to B$ is read as ``$f$~is a function from $A$ to~$B$'' or more simply as ``$f$~maps $A$ to~$B$.''
If $f\colon A\to B$ and if $a\in A$, then $f$ associates some element of $B$ to~$a$, denoted~$f(a)$.

For example, if $I$ is the set of items for sale in a given store and $M$ is the set of possible prices, then there is function $c\colon I\to M$ where for each item $x\in I$, $c(x)$ is the price of the item~$x$.
And if $\N$ is the set of natural numbers, then the formula $s(n) = n^2$ specifies a function $s\colon \N\to\N$.
It is in the form of formulas such as $s(n)=n^2$ or $f(x)=x^3-3x+7$ that most people first encounter functions.
But you should note that a formula by itself is not a function, although it might well specify a function between two given sets of numbers.
Functions are much more general than formulas, and they
apply to all kinds of sets, not just to sets of numbers.

\medbreak

Suppose that $f\colon A\to B$ and $g\colon B\to C$ are functions.
Given $a\in A$, there is an associated element $f(a)\in B$.
Since $g$ is a function from $B$ to $C$, and since $f(a)\in B$,
$g$ associates some element of $C$ to $f(a)$.
That element is $g(f(a))$.
Starting with an element $a$ of $A$, we have produced an associated element $g(f(a))$ of $C$.
This means that we have defined a new function from the set $A$ to the set $C$.
This function is called the \nw{composition} of $g$ with $f$, and it is denoted by $g\circ f$.  
That is, if $f\colon A\to B$ and $g\colon B\to C$ are functions, then $g\circ f\colon A\to C$ is the function which is defined by 
\[(g\circ f)(a) = g(f(a))\]
for each $a\in A$.  For example, suppose that $p$ is the function
that associates to each item in a store the price of the item,
and suppose that $t$ is a function that associates the amount of
tax on a price to each possible price.  The composition,
$t\circ p$, is the function that associates to each item the
amount of tax on that item.  Or suppose that 
$s\colon\N\to\N$ and $r\colon\N\to\N$ are the functions
defined by the formulas $s(n)=n^2$ and $r(n)=3n+1$, for each
$n\in\N$.  Then $r\circ s$ is a function from $\N$ to $\N$,
and for $n\in\N$, $(r\circ s)(n) = r(s(n)) = r(n^2) = 3n^2+1$.
In this case, we also have the function $s\circ r$, which 
satisfies $(s\circ r)(n) = s(r(n)) = s(3n+1) = (3n+1)^2 = 9n^2+6n+1$.
Note in particular that $r\circ s$ and $s\circ r$ are not
the same function.  The operation $\circ$ is not commutative.

If $A$ is a set and $f\colon A\to A$, then $f\circ f$,
the composition of $f$ with itself, is defined.  For example,
using the function $s$ from the preceding example,
$s\circ s$ is the function from $\N$ to $\N$ given by
the formula $(s\circ s)(n) = s(s(n))= s(n^2) = (n^2)^2 = n^4$.
If $m$ is the function from the set of people to itself which
associates to each person that person's mother, then
$m\circ m$ is the function that associates to each person
that person's maternal grandmother.


\medbreak

If $a$ and $b$ are elements, then $(a,b)$ denotes the
\nw{ordered pair} containing $a$ and~$b$.  The ordered pair
$(a,b)$ differs from the set $\{a,b\}$ because a set is
not ordered.  That is, $\{a,b\}$ and $\{b,a\}$ denote the
same set, but if $a\not=b$, then $(a,b)$ and $(b,a)$ are
different ordered pairs.  More generally, two
ordered pairs $(a,b)$ and $(c,d)$ are equal if and only if
both $a=c$ and $b=d$.  If $(a,b)$ is an ordered pair,
then $a$ and $b$ are referred to as the \nw{coordinates} of the
ordered pair.  In particular, $a$ is the first coordinate and
$b$ is the second coordinate.

If $A$ and $B$ are sets, then we can form the set
$A\times B$ which is defined by \[A\times B=
\{(a,b)\st a\in A \text{ and } b\in B\}.\]
This set is called the \nw{cross product} or
\nw{Cartesian product} of the sets $A$ and~$B$.\index{product (of sets)}
The set $A\times B$ contains every ordered pair whose first
coordinate is an element of $A$ and whose second coordinate is
an element of $B$.  For example, if $X=\{c,d\}$ and
$Y=\{1,2,3\}$, then $X\times Y=\{(c,1), (c,2), (c,3), (d,1),(d,2), (d,3)\}$.
It is possible to extend this idea to the cross product
of more than two sets.  The cross product of the three sets
$A$, $B$, and~$C$ is denoted $A\times B\times C$.  It consists
of all \nw[ordered triple]{ordered triples} $(a,b,c)$
where $a\in A$, $b\in B$, and $c\in C$.  The definition for
four or more sets is similar.  The general term for a member
of a cross product is \nw{tuple} or, more specifically,
\nw{ordered n-tuple}.  For example, $(a,b,c,d,e)$ is
an ordered 5-tuple.

\begin{definition}
Let $A$ and $B$ be sets.  A \nw{function} from $A$ to $B$ is a subset of $A\times B$ which has the property that for each $a\in A$, the set contains one and only one ordered pair whose first coordinate is $a$.
If $(a,b)$ is that ordered pair, then $b$ is called the value of the function at~$a$ and is denoted~$f(a)$.
If $b=f(a)$, then we also say that the function $f$ \nw[none]{maps} $a$ to~$b$.
The fact that $f$ is a function from $A$ to $B$ is indicated by the notation $f\colon A\to B$.
\end{definition}

For example, if $X=\{a,b\}$ and $Y=\{1,2,3\}$, then the set $\{(a,2), (b,1)\}$ is a function from $X$ to $Y$, and $\{(1,a), (2,a), (3,b)\}$ is a function from $Y$ to~$X$.
On the other hand, $\{(1,a),(2,b)\}$ is not a function from $Y$ to~$X$, since it does not specify any value for~3.
And $\{(a,1),(a,2),(b,3)\}$ is not a function from $X$ to $Y$ because it specifies two different values, 1 and 2, associated with the same element, $a$, of $X$.

Even though the technical definition of a function is a set
of ordered pairs, it's usually better to think of a function
from $A$ to $B$ as something that associates some element of
$B$ to every element of~$A$.  The set of ordered pairs is one
way of expressing this association.  If the association is
expressed in some other way, it's easy to write down the
set of ordered pairs.  For example, the function
$s\colon\N\to\N$ which is specified by the formula
$s(n)=n^2$ can be written as the set of ordered
pairs $\{(n,n^2)\st n\in \N\}$.

\medbreak

Suppose that $f\colon A\to B$ is a function from the set $A$ to the set~$B$.  We say that $A$ is the \nw{domain} of the function~$f$ and that $B$ is the \nw{co-domain} of the function.
We define the \nw{image} of the function~$f$ to be the set $\{b\in B\st \exists a\in A\,(b=f(a))\}$.
Put more simply, the image of $f$ is the set $\{f(a)\st a\in A\}$.
That is, the image is the set of all values, $f(a)$, of the function, for all $a\in A$.
For example, for the function $s\colon\N\to\N$ that is specified by $s(n)=n^2$, both the domain and the co-domain are $\N$, and the image is the set $\{n^2\st n\in\N\}$, or $\{0,1,4,9,16,\dots\}$.

Note that the image of a function is a subset of its co-domain.
It can be a proper subset, as in the above example, but it is
also possible for the image of a function to be equal to
the co-domain.  In that case, the function is said to be
\nw[onto function]{onto}.  Sometimes, the fancier term
\nw{surjective} is used instead.  Formally, a function
$f\colon A\to B$ is said to be onto (or surjective) if
every element of $B$ is equal to $f(a)$ for some element of
$A$.  In terms of logic, $f$ is onto if and only if
for each $b \in B$ there exists some $a \in A$ such that $f(a) = b$.

For example, let $X=\{a,b\}$ and $Y=\{1,2,3\}$, and consider
the function from $Y$ to $X$ specified by the set of ordered
pairs $\{(1,a),(2,a),(3,b)\}$.  This function is onto because
its image, $\{a,b\}$, is equal to the co-domain,~$X$. However,
the function from $X$ to $Y$ given by $\{(a,1),(b,3)\}$ is not
onto, because its image, $\{1,3\}$, is a proper subset of
its co-domain,~$Y$.  As a further example, consider the function
$f$ from $\Z$ to $\Z$ given by $f(n) = n-52$.  To show that $f$
is onto, we need to pick an arbitrary $b$ in the co-domain $\Z$
and show that there is some number $a$ in the domain $\Z$
such that $f(a) = b$.  So let $b$ be an arbitrary integer;
we want to find an $a$ such that $a-52=b$.  Clearly this equation
will be true when $a=b+52$.  So every element $b$ is the image
of the number $a=b+52$, and $f$ is therefore onto.  Note that if
$f$ had been specified to have domain $\N$, then $f$ would
\emph{not} be onto, as for some $b \in \Z$ the number $a=b+52$
is not in the domain $\N$ (for example, the integer $-73$ is
not in the image of $f$, since $-21$ is not in $\N$.)

If $f\colon A\to B$ and if $a\in A$, then $a$ is associated to
only one element of $B$.  This is part of the definition of
a function.  However, no such restriction holds for elements
of $B$.  If $b\in B$, it is possible for $b$ to be associated
to zero, one, two, three, \dots, or even to an infinite
number of elements of~$A$.  In the case where each element of
the co-domain is associated to at most one element of the domain,
the function is said to be \nw{one-to-one}.  Sometimes,
the term \nw{injective} is used instead.  The function $f$
is one-to-one (or injective) if for any two elements $x \neq y$ in
the domain, $f(x)\neq f(y)$.
Or, equivalently, if $f(x) = f(y)$ then $x = y$.
(Sometimes, it is easier to work with the definition of one-to-one when it is expressed in this form.)
The function $s\colon\N\to\N$ specified by $s(n)=n^2$ is one-to-one.
However, we can define a function $r\colon\Z\to\Z$ by the same formula:
$r(n)=n^2$, for $n\in\Z$.
The function $r$ is \emph{not} one-to-one since two different integers can have the same square.
For example, $r(-2)=r(2)$.

A function that is both one-to-one and onto is said to be \nw{bijective}.
The function that associates each point in a map of New York State to a point in the state itself is presumably bijective.
For each point on the map, there is a corresponding point in the state, and \textit{vice versa}.
If we specify the function $f$ from the set $\{1,2,3\}$ to the set $\{a,b,c\}$ as the set of ordered pairs $\{(1,b),(2,a),(3,c)\}$, then $f$ is a bijective function.
Or consider the function from $\Z$ to $\Z$ given by $f(n) = n-52$.
We have already shown that $f$ is onto.
We can show that it is also one-to-one: 
pick an arbitrary $x$ and $y$ in $\Z$ and assume that $f(x) = f(y)$.
This means that $x-52 = y-52$, and adding 52 to both sides of the equation gives $x=y$.
Since $x$ and $y$ were arbitrary, we have proved if $f(x)=f(y)$ then $x=y$, that is, that $f$ is one-to-one.
Altogether, then, $f$ is a bijection.


\medbreak

One difficulty that people sometimes have with mathematics is its generality.
A set is a collection of elements, but an ``element'' can be anything at all, including other sets.
Once we have defined ordered pairs, we can use ordered pairs as elements of sets.
We could also make ordered pairs of sets.
Now that we have defined functions, every function is itself an element.
This means that we can have sets that contain functions.
We can even have a function whose domain and co-domain are sets of functions.
Similarly, the domain or co-domain of a function might be a set of sets, or a set of ordered pairs.
Computer scientists have a good name for this.
They would say that sets, ordered pairs, and functions are \nw[first-class object]{first-class objects}.
Once a set, ordered pair, or function has been defined, it can be used just like any other element.
If they were not first-class objects, there could be restrictions on the way they can be used.
For example, it might not be possible to use functions as members of sets.
(This would make them ``second class.'')

For example, suppose that $A$, $B$, and $C$ are sets.
Then since $A\times B$ is a set, we might have a function $f\colon A\times B\to C$.
If $(a,b)\in A\times B$, then the value of $f$ at $(a,b)$ would be denoted $f((a,b))$.
In practice, though, one set of parentheses is usually dropped, and the value of $f$ at $(a,b)$ is denoted $f(a,b)$.
As a particular example, we might define a function $p\colon \N\times\N\to\N$ with the formula $p(n,m)=nm+1$.
Similarly, we might define a function $q\colon \N\times\N\times\N\to\N\times\N$ by $q(n,m,k)=(nm-k,nk-n)$.

Suppose that $A$ and $B$ are sets.
There are, in general, many functions that map $A$ to~$B$.
We can gather all those functions into a set.
This set, whose elements are all the functions from $A$ to $B$, is denoted~$B^A$.\index{set!of functions from $A$ to $B$}
(We'll see later why this notation is reasonable.)  
Using this notation, saying $f\colon A\to B$ is exactly the same as saying $f\in B^A$.
Both of these notations assert that $f$ is a function from $A$ to~$B$.
Of course, we can also form an unlimited number of other sets, such as the power set $\POW\big(B^A\big)$, the cross product $B^A\times A$, or the set $A^{A\times A}$, which contains all the functions from the set $A\times A$ to the set~$A$.
And of course, any of these sets can be the domain or co-domain of a function.
An example of this is the function ${\mathscr E}\colon B^A\times A\to B$ defined by the formula ${\mathscr E}(f,a) = f(a)$.
Let's see if we can make sense of this notation.
Since the domain of ${\mathscr E}$ is $B^A\times A$, an element in the domain is an ordered pair in which the first coordinate is a function from $A$ to $B$ and the second coordinate is an element of~$A$.
Thus, ${\mathscr E}(f,a)$ is defined for a function $f\colon A\to B$ and an element $a\in A$.
Given such an $f$ and $a$, the notation $f(a)$ specifies an element of~$B$, so the definition of ${\mathscr E}(f,a)$ as $f(a)$ makes sense.
The function ${\mathscr E}$ is called the ``evaluation function'' since it captures the idea of evaluating a function at an element of its domain.



\begin{exercises}

\problem Let $A=\{1,2,3,4\}$ and let $B=\{a,b,c\}$.
Find the sets $A\times B$ and $B\times A$.

\problem Let $A$ be the set $\{a,b,c,d\}$.  Let $f$ be the
function from $A$ to $A$ given by the set of ordered pairs
$\{(a,b),(b,b),(c,a),(d,c)\}$, and let $g$ be the function
given by the set of ordered pairs $\{(a,b),(b,c),(c,d),(d,d)\}$.
Find the set of ordered pairs for the composition $g\circ f$.

\problem Let $A=\{a,b,c\}$ and let $B=\{0,1\}$.  Find all
possible functions from $A$ to $B$.  Give each function as
a set of ordered pairs.  (Hint: Every such function corresponds
to one of the subsets of $A$.)

\problem Consider the functions from $\Z$ to $\Z$ which are
defined by the following formulas.  Decide whether each
function is onto and whether it is one-to-one; prove your answers.  
\pparts{
   f(n)=2n&       g(n)=n+1&       h(n)=n^2+n+1\cr\noalign{\smallskip}
   s(n)=\left\{\begin{tabular}{ll}
            n/2,&\text{if $n$ is even}\cr
            (n+1)/2,&\text{if $n$ is odd}
          \end{tabular}
        \right.\hidewidth\cr
}

\problem Prove that composition of functions is an associative
operation.  That is, prove that for functions
$f\colon A\to B$, $g\colon B\to C$, and $h\colon C\to D$,
the compositions $(h\circ g)\circ f$ and $h\circ(g\circ f)$
are equal.

\problem 
Suppose that $f\colon A\to B$ and $g\colon B\to C$ are
functions and that $g\circ f$ is one-to-one.  
\ppart Prove that $f$ is one-to-one. (Hint: use a proof by contradiction.)
\ppart Find
a specific example that shows that $g$ is not necessarily
one-to-one.

\problem Suppose that $f\colon A\to B$ and $g\colon B\to C$,
and suppose that the composition $g\circ f$ is an onto
function.  
\ppart Prove that $g$ is an onto function.  
\ppart Find
a specific example that shows that $f$ is not necessarily
onto.



\end{exercises}


